const connectWalletBtn = document.getElementById('connectWalletBtn');
const acquistaBtn = document.getElementById('acquistaBtn');
const walletStatus = document.getElementById('walletStatus');
const notifica = document.getElementById('notifica');
const testoNotifica = document.getElementById('testoNotifica');

let wallet;

// Funzione per connettere il wallet Phantom
connectWalletBtn.addEventListener('click', async () => {
    if (window.solana && window.solana.isPhantom) {
        try {
            wallet = await window.solana.connect();
            walletStatus.textContent = `Wallet connesso: ${wallet.publicKey.toString()}`;
            acquistaBtn.disabled = false;
        } catch (err) {
            console.error("Errore durante la connessione del wallet:", err);
            walletStatus.textContent = "Errore durante la connessione del wallet.";
        }
    } else {
        walletStatus.textContent = "Phantom Wallet non installato!";
    }
});

// Funzione per acquistare il token
acquistaBtn.addEventListener('click', async () => {
    if (wallet) {
        try {
            // Qui puoi aggiungere la logica per l'acquisto del token
            // Ad esempio, inviare una transazione Solana
            testoNotifica.textContent = "Acquisto in corso...";
            notifica.style.display = 'block';

            // Simulazione di un acquisto
            setTimeout(() => {
                testoNotifica.textContent = "Acquisto completato!";
                setTimeout(() => {
                    notifica.style.display = 'none';
                }, 3000);
            }, 2000);
        } catch (err) {
            console.error("Errore durante l'acquisto:", err);
            testoNotifica.textContent = "Errore durante l'acquisto.";
            notifica.style.display = 'block';
            setTimeout(() => {
                notifica.style.display = 'none';
            }, 3000);
        }
    } else {
        walletStatus.textContent = "Collega il wallet per acquistare.";
    }
});
