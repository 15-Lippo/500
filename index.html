<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Acquista 500 Crypto - Il Futuro della Finanza</title>
    <meta name="description" content="Investi in 500 Crypto, la moneta digitale del futuro. Sicura, veloce e rivoluzionaria.">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <link rel="stylesheet" href="styles.css">
    <style>
        body {
            font-family: 'Arial', sans-serif;
            background-color: #f4f4f9;
            color: #333;
            margin: 0;
            padding: 0;
        }
        header {
            background: linear-gradient(135deg, #6a11cb, #2575fc);
            color: white;
            padding: 60px 20px;
            text-align: center;
        }
        header h1 {
            font-size: 3rem;
            margin: 0;
        }
        header p {
            font-size: 1.2rem;
            margin: 10px 0 0;
        }
        .cta-button {
            background-color: #ff6f61;
            color: white;
            padding: 15px 30px;
            border: none;
            border-radius: 5px;
            font-size: 1.2rem;
            cursor: pointer;
            transition: background-color 0.3s ease;
        }
        .cta-button:hover {
            background-color: #ff3b2f;
        }
        section {
            padding: 40px 20px;
            text-align: center;
        }
        .features {
            display: flex;
            justify-content: space-around;
            flex-wrap: wrap;
            margin-top: 40px;
        }
        .feature {
            flex: 1;
            max-width: 300px;
            margin: 20px;
            padding: 20px;
            background: white;
            border-radius: 10px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }
        .feature i {
            font-size: 2rem;
            color: #2575fc;
            margin-bottom: 15px;
        }
        footer {
            background-color: #333;
            color: white;
            text-align: center;
            padding: 20px;
        }
        #statusMessage {
            margin-top: 20px;
            font-size: 1rem;
        }
        #walletAddress {
            margin-top: 10px;
            font-size: 0.9rem;
            color: #666;
        }
        .install-phantom-button {
            background-color: #2575fc;
            color: white;
            padding: 15px 30px;
            border: none;
            border-radius: 5px;
            font-size: 1.2rem;
            cursor: pointer;
        }
        .install-phantom-button:hover {
            background-color: #1f55b0;
        }
    </style>
</head>
<body>

    <!-- Header -->
    <header>
        <h1>500 Crypto</h1>
        <p>Il futuro della finanza è qui. Investi oggi per un domani migliore.</p>
        <button class="cta-button" id="buyButton">Acquista Ora</button>
        <div id="statusMessage"></div>
        <div id="walletAddress"></div>
    </header>

    <!-- Sezione Caratteristiche -->
    <section>
        <h2>Perché scegliere 500 Crypto?</h2>
        <div class="features">
            <div class="feature">
                <i class="fas fa-shield-alt"></i>
                <h3>Sicurezza</h3>
                <p>La tua sicurezza è la nostra priorità. Tecnologia blockchain avanzata.</p>
            </div>
            <div class="feature">
                <i class="fas fa-rocket"></i>
                <h3>Velocità</h3>
                <p>Transazioni veloci e senza confini. Completa pagamenti in pochi secondi.</p>
            </div>
            <div class="feature">
                <i class="fas fa-chart-line"></i>
                <h3>Crescita</h3>
                <p>Investi in una criptovaluta con un potenziale di crescita esponenziale.</p>
            </div>
        </div>
    </section>

    <!-- Sezione Call to Action -->
    <section style="background-color: #2575fc; color: white;">
        <h2>Non perdere l'opportunità</h2>
        <p>Unisciti alla rivoluzione finanziaria. Acquista 500 Crypto oggi stesso!</p>
        <button class="cta-button" id="buyButton2">Inizia Ora</button>
    </section>

    <!-- Footer -->
    <footer>
        <p>© 2023 500 Crypto. Tutti i diritti riservati.</p>
    </footer>

    <!-- Script per Solana e Phantom Wallet -->
    <script src="https://unpkg.com/@solana/web3.js@latest/lib/index.iife.js"></script>
    <script src="https://unpkg.com/@solana/spl-token@latest/lib/index.iife.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const buyButton = document.getElementById('buyButton');
            const buyButton2 = document.getElementById('buyButton2');
            const statusMessage = document.getElementById('statusMessage');
            const walletAddressDisplay = document.getElementById('walletAddress');


             // Funzione per connettere il wallet Phantom
            async function connectWallet() {
              if (window.solana && window.solana.isPhantom) {
                    try {
                        const response = await window.solana.connect();
                        const publicKey = response.publicKey.toString();
                        statusMessage.textContent = `Wallet connesso: `;
                        statusMessage.style.color = 'green';
                        walletAddressDisplay.textContent = publicKey;
                        return publicKey;
                    } catch (error) {
                        console.error("Errore durante la connessione al wallet:", error);
                        statusMessage.textContent = "Errore durante la connessione al wallet: " + error.message;
                        statusMessage.style.color = 'red';
                       walletAddressDisplay.textContent = '';
                        return null;
                    }
                } else {
                    statusMessage.textContent = "Phantom Wallet non è installato. Per favore, installa Phantom Wallet per continuare.";
                    statusMessage.style.color = 'red';
                    walletAddressDisplay.textContent = '';
                    if (buyButton) {
                         buyButton.style.display = 'none';
                       
                        // Mostra il pulsante "Installa Phantom"
                        const installButton = document.createElement('button');
                         installButton.textContent = 'Installa Phantom Wallet';
                         installButton.classList.add('install-phantom-button');
                         installButton.addEventListener('click', () => {
                           window.open('https://phantom.app/', '_blank');
                         });
                           
                       
                         header.appendChild(installButton);
                         
                     }
                    if(buyButton2)  buyButton2.style.display = 'none';
                    return null;
                }
            }

            // Funzione per trasferire token SPL
            async function transferSPLToken() {
                const publicKey = await connectWallet();
                if (!publicKey) return;
                buyButton.disabled = true; // disabilita il bottone durante la transazione
                buyButton2.disabled = true;
                statusMessage.textContent = 'Transazione in corso...';
                statusMessage.style.color = 'orange';

                 // Configurazione della connessione a Solana
                const connection = new solanaWeb3.Connection(solanaWeb3.clusterApiUrl('mainnet-beta'), 'confirmed');


                // Verifica il saldo SOL del wallet
                try {
                    const balance = await connection.getBalance(new solanaWeb3.PublicKey(publicKey));
                    if (balance < 5000) { // 5000 lamports è un valore di esempio per le fee
                        statusMessage.textContent = "Saldo SOL insufficiente per coprire le fee di transazione.";
                        statusMessage.style.color = 'red';
                        buyButton.disabled = false; // riabilita il bottone
                         buyButton2.disabled = false;
                        return;
                    }
                } catch (error) {
                    console.error("Errore durante il controllo del saldo SOL:", error);
                    statusMessage.textContent = "Errore durante il controllo del saldo SOL.";
                    statusMessage.style.color = 'red';
                    buyButton.disabled = false; // riabilita il bottone
                    buyButton2.disabled = false;
                    return;
                }

                // Indirizzo del token SPL (SOSTITUISCI QUESTO INDIRIZZO CON IL TUO TOKEN MINT ADDRESS)
                const tokenMintAddress = new solanaWeb3.PublicKey('YourTokenMintAddressHere');

                // Indirizzo del wallet del destinatario (SOSTITUISCI QUESTO INDIRIZZO CON L'INDIRIZZO DEL TUO WALLET DESTINATARIO)
                const recipientAddress = new solanaWeb3.PublicKey('RecipientPublicKeyHere');

                // Quantità di token da trasferire (es. 100 token, supponendo 9 decimali)
                const amount = 100 * (10 ** 9);

                // Creazione della transazione
                const transaction = new solanaWeb3.Transaction().add(
                    splToken.Token.createTransferInstruction(
                        splToken.TOKEN_PROGRAM_ID,
                        new solanaWeb3.PublicKey(publicKey), // Indirizzo del mittente
                        recipientAddress, // Indirizzo del destinatario
                        new solanaWeb3.PublicKey(publicKey), // Indirizzo del proprietario
                        [],
                        amount
                    )
                );

                 // Firma e invio della transazione
                try {
                    const { signature } = await window.solana.signAndSendTransaction(transaction);
                    statusMessage.textContent = `Transazione inviata! Signature: ${signature} <a href="https://solscan.io/tx/${signature}" target="_blank">Visualizza su Solscan</a>`;
                     statusMessage.style.color = 'green';
                } catch (error) {
                    console.error("Errore durante l'invio della transazione:", error);
                    statusMessage.textContent = "Errore durante l'invio della transazione: " + error.message;
                     statusMessage.style.color = 'red';
                } finally {
                     buyButton.disabled = false;
                      buyButton2.disabled = false;
                }
            }

            // Collega i pulsanti alla funzione transferSPLToken
            if (buyButton && buyButton2) {
                buyButton.addEventListener('click', transferSPLToken);
                buyButton2.addEventListener('click', transferSPLToken);
            } else {
                console.error("Pulsanti non trovati nel DOM.");
            }

        });
    </script>
</body>
</html>
